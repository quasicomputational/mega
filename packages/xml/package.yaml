name: q4c12-xml
version: "0"
homepage: https://github.com/quasicomputational/mega/tree/master/packages/xml
github: quasicomputational/mega
author: quasicomputational <quasicomputational@gmail.com>
license: BSD2
license-file:
  - LICENSE
  - LICENSE.BSD2
  - LICENSE.W3C
extra-doc-files:
  - README.markdown
extra-source-files:
  - data/html.xml
  - test/golden/**/*.in
  - test/golden/**/*.out
  - test/golden/**/*.errout
  - test/golden/**/*.fails
defaults:
  local: ../../hpack/defaults.rolling.yaml

library:
  source-dirs:
    - src
  exposed-modules:
    - Q4C12.XML
    - Q4C12.XML.Desc
    - Q4C12.XML.Desc.Class
    - Q4C12.XML.Desc.Parse
    - Q4C12.XML.Desc.Print
    - Q4C12.XML.Desc.RApplicative
    - Q4C12.XML.Desc.RELAX
    - Q4C12.XML.Desc.TH
    - Q4C12.XML.Entity
    - Q4C12.XML.Internal
    - Q4C12.XML.TH
    - Q4C12.XML.XHTML2HTML
  # Suppress Paths_*
  other-modules: []
  dependencies:
    - base-noprelude
    - containers
    - dlist
    - dlist-nonempty
    - formatting
    - q4c12-twofinger
    - q4c12-mappend
    - q4c12-position
    - q4c12-prelude
    - safe
    - template-haskell
    - text
    - text-icu
    - transformers
    - transformers-compat

executables:
  xhtml2html:
    source-dirs:
      - driver/
    main: xhtml2html.hs
    # Suppress Paths_*
    other-modules: []
    dependencies:
      - q4c12-xml
      - q4c12-prelude
      - text

  gen-entity-set-schema:
    source-dirs:
      - driver/
    main: gen-entity-set-schema.hs
    # Suppress Paths_*
    other-modules: []
    dependencies:
      - q4c12-xml
      - q4c12-prelude
      - text

  entity-set2dtd:
    source-dirs:
      - driver/
    main: entity-set2dtd.hs
    # Suppress Paths_*
    other-modules: []
    dependencies:
      - q4c12-xml
      - q4c12-prelude
      - text

tests:
  golden-tests:
    source-dirs:
      - test
    main: Test.hs
    other-modules: []
    #TODO: clean up these warnings
    ghc-options:
      - "-Wno-monomorphism-restriction"
      - "-Wno-missing-local-signatures"
    dependencies:
      - q4c12-xml
      - containers
      - filepath
      - q4c12-prelude
      - tasty
      - tasty-expected-failure
      - tasty-golden
      - text
      - transformers

benchmarks:
  parse-xml:
    source-dirs:
      - bench
    main: parse-xml.hs
    other-modules: []
    dependencies:
      - q4c12-xml
      - criterion
      - q4c12-prelude
      - text

#TODO: property-based testing. Round-trip render/parse.
